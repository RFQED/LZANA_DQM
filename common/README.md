# Macro for doing RQ-based analysis

# This is coppied from Quentin's lz_mdc2_tutorial/mdc2_like on April 20th, 2018

In this repository....

- - -

# Table of contents
1. [Event class] (#event_class)
2. [Rqlib creation](#Rqlib)
3. [Execution] (#execution)
4. [Documentation generation] (#documentation)
5. [Dependencies](#dependencies)

- - -

## Macro analysis

The example macro presented in this tutorail is called [macro.C](macro.C). A complete description of this macro is provided [here](doc/README_macro.md).
The execution of this macro will generate a ROOT output file.

To extract and format the figure, we are going to use a second macro called [plot_root.C](plot_root.C). A complete description of this plot macro is provided [here](doc/README_plot_macro.md).


---

## Rqlib creation <a name="Rqlib"></a>

Creation of the Rqlib, need to do only once (or as RQEvent format changes). 
```bash
root -b -q configure.C
```



- - -

## Usage <a name="execution"></a>

Run the analysis macro:
```bash
root -b -q load.C macro.C # use interpreted mode (slower)
# or 
root -b -q load.C macro.C+ # use compiled mode
```

Run the plot macro
```bash
root plot_root.C
```

- - -

## Documentation generation  <a name="documentation"></a>

The documentation is automatically generated by using doxygen. To create it, execute the following script:
```bash
./CreateDocumentation.sh
```
It creates a directory `doc` with two sub-directory `html` and `pdf`.
To open the html documentation, open `./doc/html/index.html` in you favorite web browser
and to open the pdf documentation, open `./doc/latex/refman.pdf`.

TIP: On some system, you can use the `open` command to open some standard files: example `open ./doc/html/index.html`

- - -

## Event class <a name="event_class"></a>

The events are loaded on the LZapRQ::RQEvent class

To acces to the data structure, you must generate the documentation: [documentation](#documentation)

- - -

## Dependencies  <a name="dependencies"></a>

As prerequist, you need to use ROOT6

### Setup on PDSF

ROOT installation (PDSF)

On PDSF, you have nothing to do !!!
It has been done for you. 

To load root, you just have to source the setup script:

source setup_pdsf.sh
That it !!


### ROOT6 installation on macos

1) Install XQuartz: https://www.xquartz.org

2) Intall homebrew: http://brew.sh
```bash
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```
and follow the instruction.

3) Install ROOT6:
```bash
brew install root
```

4)(Optional) Add ROOT your environement by adding the following lines to your .bashrc
```bash
export ROOTSYS=/Where/ROOT/Is/Installed
source $ROOTSYS/bin/thisroot.sh
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:$ROOTSYS/lib
```

Easy isn't it ?

### ROOT6 installation on UNIX

1) Check the prerequisites (https://root.cern.ch/build-prerequisites) and install the missing one
2) Get the sources
```bash
git clone http://github.com/root-project/root.git
```
3) Prepare the source building
```bash
mkdir root-build
cd root-build
cmake -DCMAKE_INSTALL_PREFIX=/Where/You/Want/To/Install/ROOT ../root 
make -j4
```
4) Add ROOT your environement by adding the following lines to your .bashrc
```bash
export ROOTSYS=/Where/You/Want/To/Install/ROOT
source $ROOTSYS/bin/thisroot.sh
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ROOTSYS/lib
```

- - -

